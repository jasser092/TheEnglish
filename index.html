<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</title>
    
    <!-- PWA Basics -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icons/icon-152x152.png">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 400px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 22px;
            margin-bottom: 5px;
        }
        
        .english-word {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #3498db;
            text-align: center;
            position: relative;
        }
        
        .english-word h2 {
            font-size: 28px;
            color: #000000;
            font-weight: bold;
            margin: 0;
        }
        
        .speaker-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .option-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .option-btn:hover {
            background: #2980b9;
        }
        
        .option-btn.correct {
            background: #27ae60;
        }
        
        .option-btn.wrong {
            background: #e74c3c;
        }
        
        .controls {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #9b59b6;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .control-btn.exit-btn {
            background: #e74c3c;
        }
        
        .stats {
            padding: 10px;
            background: #ecf0f1;
            border-radius: 8px;
            font-size: 12px;
            color: #2c3e50;
            text-align: center;
        }

        .message {
            padding: 8px;
            margin: 8px 0;
            border-radius: 5px;
            text-align: center;
            font-size: 13px;
            font-weight: bold;
        }

        .message.correct {
            background: #d4edda;
            color: #155724;
        }

        .message.wrong {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</h1>
            <p>Ø§Ø®ØªØ± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©</p>
        </div>

        <div id="message" class="message" style="display: none;"></div>

        <div class="english-word">
            <h2 id="englishWord">Book</h2>
            <button class="speaker-btn" onclick="speakCurrentWord()">ğŸ”Š</button>
        </div>

        <div class="options">
            <button class="option-btn" onclick="checkAnswer(0)">ÙƒØªØ§Ø¨</button>
            <button class="option-btn" onclick="checkAnswer(1)">Ù‚Ù„Ù…</button>
            <button class="option-btn" onclick="checkAnswer(2)">Ù…Ø¯Ø±Ø³Ø©</button>
        </div>

        <div class="controls">
            <button class="control-btn" onclick="showAddWords()">Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø§Øª</button>
            <button class="control-btn" onclick="skipWord()">ØªØ®Ø·ÙŠ</button>
            <button class="control-btn exit-btn" onclick="showStats()">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</button>
        </div>

        <div class="stats" id="stats">
            Ø§Ù„ÙƒÙ„Ù…Ø§Øª: 6 | Ø§Ù„ØµØ­ÙŠØ­Ø©: 0
        </div>
    </div>

    <script>
        // Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        let words = [
            { english: "Book", correct: "ÙƒØªØ§Ø¨", wrong1: "Ù‚Ù„Ù…", wrong2: "Ù…Ø¯Ø±Ø³Ø©" },
            { english: "She", correct: "Ù‡ÙŠ", wrong1: "Ù‡Ùˆ", wrong2: "Ù‡Ù…" },
            { english: "Red", correct: "Ø£Ø­Ù…Ø±", wrong1: "Ø£Ø²Ø±Ù‚", wrong2: "Ø£Ø®Ø¶Ø±" },
            { english: "House", correct: "Ù…Ù†Ø²Ù„", wrong1: "Ø³ÙŠØ§Ø±Ø©", wrong2: "Ø´Ø¬Ø±Ø©" },
            { english: "Water", correct: "Ù…Ø§Ø¡", wrong1: "Ù†Ø§Ø±", wrong2: "Ù‡ÙˆØ§Ø¡" },
            { english: "Cat", correct: "Ù‚Ø·Ø©", wrong1: "ÙƒÙ„Ø¨", wrong2: "Ø·Ø§Ø¦Ø±" }
        ];

        let currentIndex = 0;
        let correctCount = 0;
        let sessionTotal = 0;
        let sessionCorrect = 0;

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function init() {
            loadProgress();
            showWord();
            
            // ØªØ³Ø¬ÙŠÙ„ Service Worker
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('/sw.js')
                        .then(function(registration) {
                            console.log('Service Worker registered with scope: ', registration.scope);
                        })
                        .catch(function(error) {
                            console.log('Service Worker registration failed: ', error);
                        });
                });
            }
        }

        function loadProgress() {
            const saved = localStorage.getItem('englishProgress');
            if (saved) {
                correctCount = parseInt(saved) || 0;
            }
            updateStats();
        }

        function saveProgress() {
            localStorage.setItem('englishProgress', correctCount.toString());
        }

        function showWord() {
            const word = words[currentIndex];
            document.getElementById('englishWord').textContent = word.english;
            
            const options = document.querySelectorAll('.option-btn');
            const allOptions = [word.correct, word.wrong1, word.wrong2];
            
            // Ø®Ù„Ø· Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
            for (let i = allOptions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [allOptions[i], allOptions[j]] = [allOptions[j], allOptions[i]];
            }
            
            options.forEach((btn, index) => {
                btn.textContent = allOptions[index];
                btn.className = 'option-btn';
                btn.disabled = false;
            });
            
            document.getElementById('message').style.display = 'none';
            
            // Ù†Ø·Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø©
            setTimeout(speakCurrentWord, 300);
        }

        function speakCurrentWord() {
            const word = document.getElementById('englishWord').textContent;
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                speechSynthesis.speak(utterance);
            }
        }

        function checkAnswer(selectedIndex) {
            const word = words[currentIndex];
            const options = document.querySelectorAll('.option-btn');
            const selectedText = options[selectedIndex].textContent;
            const messageElement = document.getElementById('message');
            
            sessionTotal++;

            if (selectedText === word.correct) {
                // Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
                options.forEach(btn => {
                    btn.disabled = true;
                    if (btn.textContent === word.correct) {
                        btn.classList.add('correct');
                    }
                });
                
                correctCount++;
                sessionCorrect++;
                saveProgress();
                
                messageElement.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! âœ“';
                messageElement.className = 'message correct';
                messageElement.style.display = 'block';
                
                setTimeout(() => {
                    nextWord();
                }, 1000);
                
            } else {
                // Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©
                options.forEach(btn => {
                    if (btn.textContent === selectedText) {
                        btn.classList.add('wrong');
                    }
                });
                
                messageElement.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø¬Ø±Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
                messageElement.className = 'message wrong';
                messageElement.style.display = 'block';
                
                setTimeout(() => {
                    showWord();
                }, 1500);
            }
            
            updateStats();
        }

        function nextWord() {
            currentIndex = (currentIndex + 1) % words.length;
            showWord();
        }

        function skipWord() {
            nextWord();
        }

        function showAddWords() {
            const english = prompt('Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©:');
            const arabic = prompt('Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:');
            if (english && arabic) {
                words.push({
                    english: english,
                    correct: arabic,
                    wrong1: 'ÙƒØ¨ÙŠØ±',
                    wrong2: 'ØµØºÙŠØ±'
                });
                updateStats();
                alert('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!');
            }
        }

        function showStats() {
            const percentage = sessionTotal > 0 ? Math.round((sessionCorrect / sessionTotal) * 100) : 0;
            alert(`Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¬Ù„Ø³Ø©:
Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: ${sessionTotal}
Ø§Ù„ØµØ­ÙŠØ­Ø©: ${sessionCorrect}
Ø§Ù„Ù†Ø³Ø¨Ø©: ${percentage}%`);
        }

        function updateStats() {
            document.getElementById('stats').textContent = 
                `Ø§Ù„ÙƒÙ„Ù…Ø§Øª: ${words.length} | Ø§Ù„ØµØ­ÙŠØ­Ø©: ${correctCount}`;
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        window.onload = init;
    </script>
</body>
</html>